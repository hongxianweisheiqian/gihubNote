import{d as j,ap as me,h as _,aq as Ee,H as Le,g as v,v as ue,R as ge,j as pe,o as p,b as X,J as d,w as k,k as h,n as f,l as e,Q as ce,Z as xe,e as z,c as I,F as te,K as Ae,G as Te,a3 as Oe,a4 as Se,r as ee,T as $e,af as Ne,a6 as we,t as Re,N as ye,a5 as Ve,_ as Pe,a as Be,A as de,ar as De,as as Fe,at as He,au as Me,av as Ye,aw as Xe,ax as je,ay as We,az as Ke,aA as Ge,aB as Ue,u as Ze,x as qe,aC as Je,aD as Qe,aE as et,aF as tt}from"./chunks/framework.1389b149.js";import{t as at}from"./chunks/theme.33967760.js";import{i as P,k as nt,ab as st,B as he,v as fe,O as _e,C as ve,ai as ot,aj as lt,a8 as be,G as ke,a3 as rt,H as O,a7 as it,ak as ut,al as ct,am as dt,an as ft,ao as pt,ap as vt,_ as Ie,D as B,E as V,F as mt,J as Ce,P as gt,aq as wt,a2 as yt,ar as ht,ah as _t}from"./chunks/index.1aa9d005.js";const bt=(t,s)=>{if(!P||!t||!s)return!1;const l=t.getBoundingClientRect();let o;return s instanceof Element?o=s.getBoundingClientRect():o={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},l.top<o.bottom&&l.bottom>o.top&&l.right>o.left&&l.left<o.right};var kt="Expected a function";function ie(t,s,l){var o=!0,m=!0;if(typeof t!="function")throw new TypeError(kt);return nt(l)&&(o="leading"in l?!!l.leading:o,m="trailing"in l?!!l.trailing:m),st(t,s,{leading:o,maxWait:s,trailing:m})}const It=he({urlList:{type:fe(Array),default:()=>_e([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),Ct={close:()=>!0,switch:t=>ve(t)},zt=["src"],Et=j({name:"ElImageViewer"}),Lt=j({...Et,props:It,emits:Ct,setup(t,{expose:s,emit:l}){const o=t,m={CONTAIN:{name:"contain",icon:me(ot)},ORIGINAL:{name:"original",icon:me(lt)}},{t:E}=be(),u=ke("image-viewer"),{nextZIndex:ae}=rt(),S=_(),T=_([]),L=Ee(),C=_(!0),g=_(o.initialIndex),w=Le(m.CONTAIN),c=_({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),F=v(()=>{const{urlList:a}=o;return a.length<=1}),N=v(()=>g.value===0),W=v(()=>g.value===o.urlList.length-1),ne=v(()=>o.urlList[g.value]),se=v(()=>[u.e("btn"),u.e("prev"),u.is("disabled",!o.infinite&&N.value)]),H=v(()=>[u.e("btn"),u.e("next"),u.is("disabled",!o.infinite&&W.value)]),oe=v(()=>{const{scale:a,deg:r,offsetX:i,offsetY:y,enableTransition:x}=c.value;let b=i/a,A=y/a;switch(r%360){case 90:case-270:[b,A]=[A,-b];break;case 180:case-180:[b,A]=[-b,-A];break;case 270:case-90:[b,A]=[-A,b];break}const R={transform:`scale(${a}) rotate(${r}deg) translate(${b}px, ${A}px)`,transition:x?"transform .3s":""};return w.value.name===m.CONTAIN.name&&(R.maxWidth=R.maxHeight="100%"),R}),K=v(()=>ve(o.zIndex)?o.zIndex:ae());function $(){re(),l("close")}function le(){const a=ie(i=>{switch(i.code){case V.esc:o.closeOnPressEscape&&$();break;case V.space:q();break;case V.left:J();break;case V.up:n("zoomIn");break;case V.right:Q();break;case V.down:n("zoomOut");break}}),r=ie(i=>{const y=i.deltaY||i.deltaX;n(y<0?"zoomIn":"zoomOut",{zoomRate:o.zoomRate,enableTransition:!1})});L.run(()=>{B(document,"keydown",a),B(document,"wheel",r)})}function re(){L.stop()}function G(){C.value=!1}function U(a){C.value=!1,a.target.alt=E("el.image.error")}function Z(a){if(C.value||a.button!==0||!S.value)return;c.value.enableTransition=!1;const{offsetX:r,offsetY:i}=c.value,y=a.pageX,x=a.pageY,b=ie(R=>{c.value={...c.value,offsetX:r+R.pageX-y,offsetY:i+R.pageY-x}}),A=B(document,"mousemove",b);B(document,"mouseup",()=>{A()}),a.preventDefault()}function M(){c.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function q(){if(C.value)return;const a=mt(m),r=Object.values(m),i=w.value.name,x=(r.findIndex(b=>b.name===i)+1)%a.length;w.value=m[a[x]],M()}function Y(a){const r=o.urlList.length;g.value=(a+r)%r}function J(){N.value&&!o.infinite||Y(g.value-1)}function Q(){W.value&&!o.infinite||Y(g.value+1)}function n(a,r={}){if(C.value)return;const{zoomRate:i,rotateDeg:y,enableTransition:x}={zoomRate:o.zoomRate,rotateDeg:90,enableTransition:!0,...r};switch(a){case"zoomOut":c.value.scale>.2&&(c.value.scale=Number.parseFloat((c.value.scale/i).toFixed(3)));break;case"zoomIn":c.value.scale<7&&(c.value.scale=Number.parseFloat((c.value.scale*i).toFixed(3)));break;case"clockwise":c.value.deg+=y;break;case"anticlockwise":c.value.deg-=y;break}c.value.enableTransition=x}return ue(ne,()=>{ge(()=>{const a=T.value[0];a!=null&&a.complete||(C.value=!0)})}),ue(g,a=>{M(),l("switch",a)}),pe(()=>{var a,r;le(),(r=(a=S.value)==null?void 0:a.focus)==null||r.call(a)}),s({setActiveItem:Y}),(a,r)=>(p(),X(Ne,{to:"body",disabled:!a.teleported},[d($e,{name:"viewer-fade",appear:""},{default:k(()=>[h("div",{ref_key:"wrapper",ref:S,tabindex:-1,class:f(e(u).e("wrapper")),style:ce({zIndex:e(K)})},[h("div",{class:f(e(u).e("mask")),onClick:r[0]||(r[0]=xe(i=>a.hideOnClickModal&&$(),["self"]))},null,2),z(" CLOSE "),h("span",{class:f([e(u).e("btn"),e(u).e("close")]),onClick:$},[d(e(O),null,{default:k(()=>[d(e(it))]),_:1})],2),z(" ARROW "),e(F)?z("v-if",!0):(p(),I(te,{key:0},[h("span",{class:f(e(se)),onClick:J},[d(e(O),null,{default:k(()=>[d(e(ut))]),_:1})],2),h("span",{class:f(e(H)),onClick:Q},[d(e(O),null,{default:k(()=>[d(e(ct))]),_:1})],2)],64)),z(" ACTIONS "),h("div",{class:f([e(u).e("btn"),e(u).e("actions")])},[h("div",{class:f(e(u).e("actions__inner"))},[d(e(O),{onClick:r[1]||(r[1]=i=>n("zoomOut"))},{default:k(()=>[d(e(dt))]),_:1}),d(e(O),{onClick:r[2]||(r[2]=i=>n("zoomIn"))},{default:k(()=>[d(e(ft))]),_:1}),h("i",{class:f(e(u).e("actions__divider"))},null,2),d(e(O),{onClick:q},{default:k(()=>[(p(),X(Ae(e(w).icon)))]),_:1}),h("i",{class:f(e(u).e("actions__divider"))},null,2),d(e(O),{onClick:r[3]||(r[3]=i=>n("anticlockwise"))},{default:k(()=>[d(e(pt))]),_:1}),d(e(O),{onClick:r[4]||(r[4]=i=>n("clockwise"))},{default:k(()=>[d(e(vt))]),_:1})],2)],2),z(" CANVAS "),h("div",{class:f(e(u).e("canvas"))},[(p(!0),I(te,null,Te(a.urlList,(i,y)=>Oe((p(),I("img",{ref_for:!0,ref:x=>T.value[y]=x,key:i,src:i,style:ce(e(oe)),class:f(e(u).e("img")),onLoad:G,onError:U,onMousedown:Z},null,46,zt)),[[Se,y===g.value]])),128))],2),ee(a.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var xt=Ie(Lt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const At=Ce(xt),Tt=he({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:fe([String,Object])},previewSrcList:{type:fe(Array),default:()=>_e([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),Ot={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>ve(t),close:()=>!0,show:()=>!0},St=["src","loading"],$t={key:0},Nt=j({name:"ElImage",inheritAttrs:!1}),Rt=j({...Nt,props:Tt,emits:Ot,setup(t,{emit:s}){const l=t;let o="";const{t:m}=be(),E=ke("image"),u=we(),ae=gt(),S=_(),T=_(!1),L=_(!0),C=_(!1),g=_(),w=_(),c=P&&"loading"in HTMLImageElement.prototype;let F,N;const W=v(()=>[E.e("inner"),H.value&&E.e("preview"),L.value&&E.is("loading")]),ne=v(()=>u.style),se=v(()=>{const{fit:n}=l;return P&&n?{objectFit:n}:{}}),H=v(()=>{const{previewSrcList:n}=l;return Array.isArray(n)&&n.length>0}),oe=v(()=>{const{previewSrcList:n,initialIndex:a}=l;let r=a;return a>n.length-1&&(r=0),r}),K=v(()=>l.loading==="eager"?!1:!c&&l.loading==="lazy"||l.lazy),$=()=>{P&&(L.value=!0,T.value=!1,S.value=l.src)};function le(n){L.value=!1,T.value=!1,s("load",n)}function re(n){L.value=!1,T.value=!0,s("error",n)}function G(){bt(g.value,w.value)&&($(),M())}const U=wt(G,200,!0);async function Z(){var n;if(!P)return;await ge();const{scrollContainer:a}=l;yt(a)?w.value=a:Ve(a)&&a!==""?w.value=(n=document.querySelector(a))!=null?n:void 0:g.value&&(w.value=ht(g.value)),w.value&&(F=B(w,"scroll",U),setTimeout(()=>G(),100))}function M(){!P||!w.value||!U||(F==null||F(),w.value=void 0)}function q(n){if(n.ctrlKey){if(n.deltaY<0)return n.preventDefault(),!1;if(n.deltaY>0)return n.preventDefault(),!1}}function Y(){H.value&&(N=B("wheel",q,{passive:!1}),o=document.body.style.overflow,document.body.style.overflow="hidden",C.value=!0,s("show"))}function J(){N==null||N(),document.body.style.overflow=o,C.value=!1,s("close")}function Q(n){s("switch",n)}return ue(()=>l.src,()=>{K.value?(L.value=!0,T.value=!1,M(),Z()):$()}),pe(()=>{K.value?Z():$()}),(n,a)=>(p(),I("div",{ref_key:"container",ref:g,class:f([e(E).b(),n.$attrs.class]),style:ce(e(ne))},[T.value?ee(n.$slots,"error",{key:0},()=>[h("div",{class:f(e(E).e("error"))},Re(e(m)("el.image.error")),3)]):(p(),I(te,{key:1},[S.value!==void 0?(p(),I("img",ye({key:0},e(ae),{src:S.value,loading:n.loading,style:e(se),class:e(W),onClick:Y,onLoad:le,onError:re}),null,16,St)):z("v-if",!0),L.value?(p(),I("div",{key:1,class:f(e(E).e("wrapper"))},[ee(n.$slots,"placeholder",{},()=>[h("div",{class:f(e(E).e("placeholder"))},null,2)])],2)):z("v-if",!0)],64)),e(H)?(p(),I(te,{key:2},[C.value?(p(),X(e(At),{key:0,"z-index":n.zIndex,"initial-index":e(oe),infinite:n.infinite,"zoom-rate":n.zoomRate,"url-list":n.previewSrcList,"hide-on-click-modal":n.hideOnClickModal,teleported:n.previewTeleported,"close-on-press-escape":n.closeOnPressEscape,onClose:J,onSwitch:Q},{default:k(()=>[n.$slots.viewer?(p(),I("div",$t,[ee(n.$slots,"viewer")])):z("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):z("v-if",!0)],64)):z("v-if",!0)],6))}});var Vt=Ie(Rt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const Pt=Ce(Vt),Bt={__name:"lazyImg",props:["src","preview-src-list"],setup(t){const s=t,l=we();return(o,m)=>(p(),X(e(Pt),ye({src:`/note${s.src}`,"preview-src-list":[`/note${s.src}`]},{...e(l)}),null,16,["src","preview-src-list"]))}};const Dt=["src"],Ft={__name:"lazyVideo",props:["videoUrl"],setup(t){const s=_(!0);return(l,o)=>(p(),I("div",{class:f(["buttonWarp",s.value?"":"buttonWarpHeight"])},[s.value?(p(),X(e(_t),{key:0,onClick:o[0]||(o[0]=m=>s.value=!1)},{default:k(()=>[Be("查看视频")]),_:1})):(p(),I("video",{key:1,src:`/note${t.videoUrl}`,controls:""},null,8,Dt))],2))}},Ht=Pe(Ft,[["__scopeId","data-v-3cb1a6fa"]]),Mt={...at,enhanceApp({app:t}){t.component("lazyImg",Bt),t.component("lazyVideo",Ht)}};function ze(t){if(t.extends){const s=ze(t.extends);return{...s,...t,async enhanceApp(l){s.enhanceApp&&await s.enhanceApp(l),t.enhanceApp&&await t.enhanceApp(l)}}}return t}const D=ze(Mt),Yt=j({name:"VitePressApp",setup(){const{site:t}=Ze();return pe(()=>{qe(()=>{document.documentElement.lang=t.value.lang,document.documentElement.dir=t.value.dir})}),Je(),Qe(),et(),D.setup&&D.setup(),()=>tt(D.Layout)}});async function Xt(){const t=Wt(),s=jt();s.provide(Fe,t);const l=He(t.route);return s.provide(Me,l),s.component("Content",Ye),s.component("ClientOnly",Xe),Object.defineProperties(s.config.globalProperties,{$frontmatter:{get(){return l.frontmatter.value}},$params:{get(){return l.page.value.params}}}),D.enhanceApp&&await D.enhanceApp({app:s,router:t,siteData:je}),{app:s,router:t,data:l}}function jt(){return We(Yt)}function Wt(){let t=de,s;return Ke(l=>{let o=Ge(l);return o?(t&&(s=o),(t||s===o)&&(o=o.replace(/\.js$/,".lean.js")),de&&(t=!1),Ue(()=>import(o),[])):null},D.NotFound)}de&&Xt().then(({app:t,router:s,data:l})=>{s.go().then(()=>{De(s.route,l.site),t.mount("#app")})});export{Xt as createApp};
